import { Font, ExtendedTable, Glyph } from "../type";
import diacritics from "./diacritics";
/*
 * Base alphabet
 */
const lowercase = {
  a: [
    [
      [0.8, 0.5],
      [0.2, 0.5],
      [0.2, 0.7],
      [0.8, 0.7],
      [0.8, 0.3],
      [0.3, 0.3],
    ],
  ],
  b: [
    [
      [0.25, 0.1],
      [0.25, 0.7],
      [0.75, 0.7],
      [0.75, 0.3],
      [0.25, 0.3],
    ],
  ],
  c: [
    [
      [0.8, 0.3],
      [0.2, 0.3],
      [0.2, 0.7],
      [0.8, 0.7],
    ],
  ],
  d: [
    [
      [0.75, 0.1],
      [0.75, 0.7],
      [0.25, 0.7],
      [0.25, 0.3],
      [0.75, 0.3],
    ],
  ],
  e: [
    [
      [0.2, 0.5],
      [0.8, 0.5],
      [0.8, 0.3],
      [0.2, 0.3],
      [0.2, 0.7],
      [0.8, 0.7],
    ],
  ],
  f: [
    [
      [0.2, 0.5],
      [0.7, 0.5],
    ],
    [
      [0.4, 0.7],
      [0.4, 0.2],
      [0.7, 0.2],
    ],
  ],
  g: [
    [
      [0.75, 0.7],
      [0.25, 0.7],
      [0.25, 0.3],
      [0.75, 0.3],
      [0.75, 0.9],
      [0.5, 0.9],
    ],
  ],
  h: [
    [
      [0.25, 0.7],
      [0.25, 0.1],
    ],
    [
      [0.25, 0.3],
      [0.75, 0.3],
      [0.75, 0.7],
    ],
  ],
  i: [
    [
      [0.5, 0.1],
      [0.5, 0.15],
    ],
    [
      [0.5, 0.3],
      [0.5, 0.7],
    ],
  ],
  j: [
    [
      [0.6, 0.1],
      [0.6, 0.15],
    ],
    [
      [0.6, 0.3],
      [0.6, 0.9],
      [0.3, 0.9],
    ],
  ],
  k: [
    [
      [0.3, 0.7],
      [0.3, 0.1],
    ],
    [
      [0.8, 0.3],
      [0.3, 0.5],
      [0.8, 0.7],
    ],
  ],
  l: [
    [
      [0.4, 0.1],
      [0.5, 0.1],
      [0.5, 0.7],
      [0.6, 0.7],
    ],
  ],
  m: [
    [
      [0.2, 0.7],
      [0.2, 0.3],
      [0.8, 0.3],
      [0.8, 0.7],
    ],
    [
      [0.5, 0.3],
      [0.5, 0.7],
    ],
  ],
  n: [
    [
      [0.2, 0.7],
      [0.2, 0.3],
      [0.8, 0.3],
      [0.8, 0.7],
    ],
  ],
  o: [
    [
      [0.2, 0.7],
      [0.2, 0.3],
      [0.8, 0.3],
      [0.8, 0.7],
      [0.2, 0.7],
    ],
  ],
  p: [
    [
      [0.25, 0.9],
      [0.25, 0.3],
      [0.75, 0.3],
      [0.75, 0.7],
      [0.25, 0.7],
    ],
  ],
  q: [
    [
      [0.75, 0.9],
      [0.75, 0.3],
      [0.25, 0.3],
      [0.25, 0.7],
      [0.75, 0.7],
    ],
  ],
  r: [
    [
      [0.7, 0.3],
      [0.4, 0.3],
      [0.4, 0.7],
    ],
  ],
  s: [
    [
      [0.8, 0.3],
      [0.2, 0.3],
      [0.2, 0.5],
      [0.8, 0.5],
      [0.8, 0.7],
      [0.2, 0.7],
    ],
  ],
  t: [
    [
      [0.2, 0.3],
      [0.8, 0.3],
    ],
    [
      [0.35, 0.2],
      [0.35, 0.7],
      [0.65, 0.7],
    ],
  ],
  u: [
    [
      [0.2, 0.3],
      [0.2, 0.7],
      [0.8, 0.7],
    ],
    [
      [0.8, 0.75],
      [0.8, 0.3],
    ],
  ],
  v: [
    [
      [0.2, 0.3],
      [0.5, 0.7],
      [0.8, 0.3],
    ],
  ],
  w: [
    [
      [0.2, 0.3],
      [0.2, 0.7],
      [0.8, 0.7],
      [0.8, 0.3],
    ],
    [
      [0.5, 0.3],
      [0.5, 0.7],
    ],
  ],
  x: [
    [
      [0.2, 0.3],
      [0.8, 0.7],
    ],
    [
      [0.8, 0.3],
      [0.2, 0.7],
    ],
  ],
  y: [
    [
      [0.25, 0.3],
      [0.25, 0.7],
      [0.75, 0.7],
    ],
    [
      [0.75, 0.3],
      [0.75, 0.9],
      [0.5, 0.9],
    ],
  ],
  z: [
    [
      [0.2, 0.3],
      [0.8, 0.3],
      [0.2, 0.7],
      [0.8, 0.7],
    ],
  ],
} as Font;

// Associate diacritics with existing glyph
const accentTable = {
  // a
  ḁ: ["a", ["db"]],
  ả: ["a", ["ha"]],
  ấ: ["a", ["cr", "ct"]],
  ầ: ["a", ["cr", "gr"]],
  ẩ: ["a", ["cr", "ha"]],
  ẫ: ["a", ["cr", "tl"]],
  ậ: ["a", ["cr", "db"]],
  ắ: ["a", ["br", "ct"]],
  ằ: ["a", ["br", "gr"]],
  ẳ: ["a", ["br", "ct"]],
  ẵ: ["a", ["br", "tl"]],
  ặ: ["a", ["br", "db"]],

  à: ["a", ["gr"]],
  á: ["a", ["ct"]],
  â: ["a", ["cr"]],
  ä: ["a", ["dr"]],
  ã: ["a", ["tl"]],
  ă: ["a", ["br"]],
  ǎ: ["a", ["hc"]],
  ā: ["a", ["mc"]],

  // b
  ḃ: ["b", ["da"]],
  ḅ: ["b", ["db"]],
  ḇ: ["b", ["lb"]],

  // c
  ć: ["c", ["ct"]],
  ĉ: ["c", ["cr"]],
  ç: ["c", ["cd"]],

  // d
  ḋ: ["d", ["da"]],
  ḍ: ["d", ["db"]],
  ḏ: ["d", ["lb"]],
  ḑ: ["d", ["cd"]],
  ḓ: ["d", ["crb"]],

  // e
  ẹ: ["e", ["db"]],
  ẻ: ["e", ["ha"]],
  ẽ: ["e", ["tl"]],
  ế: ["e", ["cr", "ct"]],
  ề: ["e", ["cr", "gr"]],
  ể: ["e", ["cr", "ha"]],
  ễ: ["e", ["cr", "tl"]],
  ệ: ["e", ["cr", "db"]],

  ḙ: ["e", ["crb"]],
  ḛ: ["e", ["tlb"]],

  // f
  ḟ: ["f", ["da"]],

  // g
  ḡ: ["g", ["mc"]],

  // h
  ḣ: ["h", ["da"]],
  ḥ: ["h", ["db"]],
  ḧ: ["h", ["dr"]],
  ḩ: ["h", ["cdl"]],

  // i
  Ỉ: ["i", ["ha"]],
  Ị: ["i", ["db"]],

  // o
  ọ: ["o", ["db"]],
  ỏ: ["o", ["ha"]],
  ố: ["o", ["cr", "ct"]],
  ồ: ["o", ["cr", "gr"]],
  ổ: ["o", ["cr", "ha"]],
  ỗ: ["o", ["cr", "tl"]],
  ộ: ["o", ["cr", "db"]],
  ớ: ["o", ["hr", "ct"]],
  ờ: ["o", ["hr", "gr"]],
  ở: ["o", ["hr", "ha"]],
  ỡ: ["o", ["hr", "tl"]],
  ợ: ["o", ["hr", "db"]],

  // u
  ụ: ["u", ["db"]],
  ủ: ["u", ["ha"]],
  ứ: ["u", ["hr", "ct"]],
  ừ: ["u", ["hr", "gr"]],
  ử: ["u", ["hr", "ha"]],
  ữ: ["u", ["hr", "tl"]],
  ự: ["u", ["hr", "db"]],

  // y
  ỳ: ["y", ["gr"]],
  ỵ: ["y", ["db"]],
  ỷ: ["y", ["ha"]],
  ỹ: ["y", ["tl"]],
} as ExtendedTable;

// Clone exisiting glyph and add diacritical marks
const accented = {} as Font;
Object.keys(accentTable).map((char) => {
  accented[char as keyof typeof accented] = [
    ...lowercase[accentTable[char][0] as keyof Font],
    ...accentTable[char][1].reduce(
      (acc: Glyph, a: keyof Font) => [...acc, ...diacritics[a]],
      [],
    ),
  ] as Glyph;
});

// Merge all glyphs and add some ligature
const extended = {
  ...lowercase,
  æ: [
    [
      [0.5, 0.3],
      [0.8, 0.3],
      [0.8, 0.5],
      [0.2, 0.5],
      [0.2, 0.7],
      [0.5, 0.7],
      [0.5, 0.3],
      [0.3, 0.3],
    ],
    [
      [0.5, 0.7],
      [0.8, 0.7],
    ],
  ],
  œ: [
    [
      [0.5, 0.3],
      [0.8, 0.3],
      [0.8, 0.5],
      [0.5, 0.5],
      [0.5, 0.3],
      [0.2, 0.3],
      [0.2, 0.7],
      [0.5, 0.7],
      [0.5, 0.5],
    ],
    [
      [0.5, 0.7],
      [0.8, 0.7],
    ],
  ],
  ...accented,
};
export default extended;
